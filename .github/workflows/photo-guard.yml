name: PhotoGuard (manual-parallel)

on:
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        shard: [0,1,2,3,4,5,6,7]   # 8-way 병렬
        shards: [8]
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
          cache: 'pip'
      - run: python -m pip install -r requirements.txt
      - name: Run shard
        env:
          GAS_URL: ${{ secrets.GAS_URL }}
          GAS_TOKEN: ${{ secrets.GAS_TOKEN }}
        run: |
          python job.py --shard ${{ matrix.shard }} --shards ${{ matrix.shards }}
